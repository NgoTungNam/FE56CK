<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<style>
    main {
        display: flex;
    }

    .active img {
        border-radius: 50% solid #68a381;
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        filter: invert(0) grayscale(0);
        /* Màu ban đầu của icon */
    }

    .carousel-control-prev-icon:hover,
    .carousel-control-next-icon:hover {
        filter: invert(1) grayscale(0);
        /* Màu khi hover (đảo màu) */
    }
    .nav-item:hover{
        background-color: black;
        border-radius: 5%;
        transition: 0.3s ease; /* Hiệu ứng chuyển đổi mượt mà */
        transform: scale(1.05); /* Make the button grow by 10% on hover */
    }
    .nav-item:hover .nav-link {
        color: white;
        transition: 0.3s ease; /* Hiệu ứng chuyển đổi mượt mà */
        transform: scale(1.05); /* Make the button grow by 10% on hover */
        padding: 10px 10px;
    }
    .navbar-brand:hover{
        background-color: black;
        color: white;
        border-radius: 5%;
        text-align: center;
        transition: 0.3s ease; /* Hiệu ứng chuyển đổi mượt mà */
        transform: scale(1.05); /* Make the button grow by 10% on hover */
        padding: 10px 10px;
    }
    .figure-img{
        width: 100%;
        overflow: hidden;
        background-color: rgba(0, 0, 0, 0.5);
        opacity: 1;
        transform: scale(1);
        border-radius: 10%;
        transform: scale(1.05); /* Make the button grow by 10% on hover */
    }
    .navbar-nav .nav-item {
    margin-right: 40px; /* Khoảng cách giữa các mục */
    margin-left: 20px;
}

.navbar-nav .nav-item:last-child {
    margin-right: 0; /* Loại bỏ margin của mục cuối cùng */
    
}
</style>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light" style="width: 1250px;">
            <div class="container-fluid" style="width: 1300px;">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <img src="./image/images/images/images/Logo2.png" alt=""
                    style="width:50px;max-height: 100px;border-radius: 10%;">
                <div class="collapse navbar-collapse" id="navbarTogglerDemo01" style="margin-left: 50px;">
                    <a class="navbar-brand" href="#">
                        <i class="fa-solid fa-house"></i>
                        Home</a>
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 " style="margin-left: 30px;">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">
                                <i class="fa-solid fa-cart-shopping"></i>
                                Giỏ hàng
                            </a>
                        </li>
                        <li class="nav-item" style="margin-left: 30px;">
                            <a class="nav-link" href="#">
                                <i class="fa-solid fa-user"></i>
                                Đăng nhập
                            </a>
                        </li>
                    </ul>
                    <form class="d-flex">
                        <input class="form-control me-2" type="Tìm kiếm" placeholder="Tìm kiếm" aria-label="Search">
                        <button class="btn btn-outline-dark" type="submit" style="width: 50%;">Tìm kiếm</button>
                    </form>
                </div>
            </div>
        </nav>
    </header>
    <main style="margin-left: 80px;">
        <div id="carouselExample" class="carousel slide"
            style="width: 30%;height: 30%;margin-top: 20px;margin-left: 50px;">
            <div class="carousel-inner" style="height: 70%;">
                <div class="carousel-item active">
                    <figure class="figure">
                        <img src="./image/images/images/images/áo vest.png" class="figure-img img-fluid rounded"
                            alt="...">
                        <figcaption class="figure-caption">A caption for the above image.</figcaption>
                    </figure>
                </div>
                <div class="carousel-item">
                    <figure class="figure">
                        <img src="./image/images/images/images/Ao.jpg" class="figure-img img-fluid rounded" alt="...">
                        <figcaption class="figure-caption">A caption for the above image.</figcaption>
                    </figure>
                </div>
                <div class="carousel-item">
                    <figure class="figure">
                        <img src="./image/images/images/images/Áovest3.webp" class="figure-img img-fluid rounded"
                            alt="...">
                        <figcaption class="figure-caption">A caption for the above image.</figcaption>
                    </figure>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <div class="content" style="display: flex;margin-top: 100px;">
            <div class="products" style="display: inline-flex;flex-wrap:wrap ;margin-left: 100px;">
                <!-- start -->
                <div class="item" style="display:block;margin-top: 40px;">
                    <div class="product">
                        <div class="info">
                            <h2>
                                <a href="" style="text-decoration: none;color: black;">Áo vest</a>
                            </h2>
                            <div class="description">
                                Áo vest chất liệu vải kaki
                            </div>
                            <div class="description">
                                <p style="margin-top:20px;">Kích cỡ</p>
                                <input type="radio" class="btn-check" name="options" id="option1" autocomplete="off">
                                <label class="btn btn-light" for="option1">M</label>
                                <input type="radio" class="btn-check" name="options" id="option2" autocomplete="off">
                                <label class="btn btn-light" for="option2">L</label>
                                <input type="radio" class="btn-check" name="options" id="option3" autocomplete="off">
                                <label class="btn btn-light" for="option3">XL</label>
                            </div>
                            <select class="form-select" aria-label="Default select example" style="margin-top: 20px;">
                                <option selected>Màu sắc</option>
                                <option value="1">Xanh</option>
                                <option value="2">Rêu</option>
                                <option value="3">Đen</option>
                            </select>

                            <div class="quantity" style="margin-top: 20px;">
                                <button type="button" class="btn btn-success" data-type="cong">+</button>
                                <input class="input_quantity" value="1" data-price="1000000">
                                <button type="button" class="btn btn-danger" data-type="tru">-</button>
                            </div>
                            <div class="price" style="margin-top: 10px;color: red;">
                                <span>Giá:</span>
                                <span id="total">1.000.000đ</span>
                            </div>
                            <button type="button" style="background-color: orangered;margin-top: 20px;">Thêm vào giỏ
                                hàng</button>
                        </div>
                    </div>
                </div>

    </main>
    <script src="./jquery/jquery-3.7.1.min.js"></script>
    <script src="./node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $('.btn').on('click', function () {
    var obj = $(this).parent().find('.input_quantity');
    var quantity = parseInt(obj.val(), 10); // Chuyển đổi thành số nguyên
    var dataType = $(this).attr('data-type');
    var price = Number(obj.attr('data-price')); // Sử dụng Number() thay vì parseInt

    if (dataType == 'cong') {
        quantity++;
    } else {
        if (quantity > 1) {
            quantity--;
        }
    }

    var total = quantity * price;
    obj.val(quantity); // Cập nhật giá trị mới vào input
    var parents = $(this).parents('.row');
    total = formatPrice(total, 'đ');
    parents.find('.price').text(total); // Cập nhật giá tiền của sản phẩm

    updateTotalPrice(); // Cập nhật tổng tiền giỏ hàng
});

function updateTotalPrice() {
    var totalPrice = 0;

    $('.input_quantity').each(function () {
        var quantityProduct = parseInt($(this).val(), 10); // Chuyển đổi thành số nguyên
        var priceProduct = Number($(this).attr('data-price')); // Sử dụng Number() thay vì parseInt
        totalPrice += quantityProduct * priceProduct; // Cộng dồn tổng tiền
    });

    totalPrice = formatPrice(totalPrice, 'đ');
    $('#total').text(totalPrice); // Cập nhật tổng tiền trên trang
}

function formatPrice(number, currency = 'đ') {
    var str = number.toString(); // Chuyển số thành chuỗi
    var count = str.length; // Đếm số ký tự trong chuỗi
    var offset = count % 3; // Tính số ký tự cần phải chia nhóm
    if (offset === 0) {
        offset = 3; // Nếu số ký tự chia hết cho 3, bắt đầu chia từ vị trí 3
    }
    var n = Math.ceil(count / 3); // Tính số nhóm cần chia
    var array = []; // Mảng lưu trữ các nhóm số
    var item;
    for (var i = 0; i < n; i++) {
        if (i === 0) {
            item = str.substr(0, offset); // Lấy phần đầu tiên trước khi chia nhóm
            array[i] = item;
        } else {
            item = str.substr(offset, 3); // Lấy nhóm tiếp theo có 3 ký tự
            offset += 3; // Cập nhật vị trí bắt đầu nhóm tiếp theo
            array[i] = item;
        }
    }

    var price = array.join('.'); // Tạo chuỗi giá tiền với dấu chấm phân cách các nhóm
    return price + currency; // Thêm ký hiệu tiền tệ vào cuối chuỗi giá
}
    </script>
</body>

</html>